模板模式+工厂模式+内部类的一种代码组织形式